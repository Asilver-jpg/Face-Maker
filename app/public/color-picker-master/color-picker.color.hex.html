<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width" name="viewport">
    <title>Color Picker</title>
    <link href="color-picker.min.css" rel="stylesheet">
  </head>
  <body>
    <p><input type="text"></p>
    <script src="color-picker.min.js"></script>
    <script>

    var HEX = CP.HEX; // Old hex color parser

    CP.HEX = function(x) {
        x = HEX(x);
        if ('string' === typeof x) {
            var count = x.length;
            if (9 === count && x[1] === x[2] && x[3] === x[4] && x[5] === x[6] && x[7] === x[8]) {
                // Shorten!
                return x[0] + x[1] + x[3] + x[5] + x[7];
            }
            if (7 === count && x[1] === x[2] && x[3] === x[4] && x[5] === x[6]) {
                // Shorten!
                return x[0] + x[1] + x[3] + x[5];
            }
        }
        return x;
    };

    var picker = new CP(document.querySelector('input'));

    picker.on('change', function(r, g, b, a) {
        this.source.value = this.color(r, g, b, a);
    });

    </script>
  </body>
</html>
